{"version":3,"sources":["break.png","Impact.js","App.js","index.js"],"names":["module","exports","client","W3CWebSocket","dimensions","Impact","props","state","impacts","this","refs","canvas","getContext","prevProps","prevState","snapshot","TO_RADIANS","Math","PI","console","log","ctx","img","image","impactsKey","rotInRad","rotation","posX","X","posY","Y","x","y","width","height","translate","rotate","drawImage","pathname","history","location","substring","onopen","send","onmessage","message","data","parsedData","JSON","parse","push","setState","ref","src","impact","className","React","Component","App","path","component","ReactDOM","render","document","getElementById"],"mappings":"qHAAAA,EAAOC,QAAU,IAA0B,mC,6KCKrCC,EAAS,IAAIC,eAAa,uBAC1BC,EAAa,CAAC,KAAM,MA+DXC,E,kDA7Db,WAAYC,GAAQ,IAAD,8BACjB,cAAMA,IACDC,MAAQ,CAACC,QAAS,IAFN,E,gEAMFC,KAAKC,KAAKC,OACNC,WAAW,Q,yCAGbC,EAAWC,EAAWC,GACvC,IAAMC,EAAaC,KAAKC,GAAG,IAC3BC,QAAQC,IAAI,UACZ,IACMC,EADSZ,KAAKC,KAAKC,OACNC,WAAW,MACxBU,EAAMb,KAAKC,KAAKa,MAEtB,IAAK,IAAMC,KAAcf,KAAKF,MAAMC,QAAQ,CAC1C,IAAMiB,EAAWhB,KAAKF,MAAMC,QAAQgB,GAAYE,SAAWV,EACrDW,EAAOlB,KAAKF,MAAMC,QAAQgB,GAAYI,EACtCC,EAAOpB,KAAKF,MAAMC,QAAQgB,GAAYM,EAAI,IAAM,KAAOrB,KAAKF,MAAMC,QAAQgB,GAAYM,EAAK,IAAoBrB,KAAKF,MAAMC,QAAQgB,GAAYM,EACpJX,QAAQC,IAAR,UAAeO,EAAf,YAAuBE,IACvB,IAAME,EAAKJ,EACLK,EAAKH,EACLI,EAAQX,EAAIW,MACZC,EAASZ,EAAIY,OAEnBb,EAAIc,UAAUJ,EAAGC,GACjBX,EAAIe,OAAOX,GACXJ,EAAIgB,UAAUf,GAAMW,EAAQ,GAAIC,EAAS,EAAGD,EAAOC,GACnDb,EAAIe,QAAQX,GACZJ,EAAIc,WAAWJ,GAAIC,M,2CAID,IAAD,OACfM,EAAW7B,KAAKH,MAAMiC,QAAQC,SAASF,SAASG,UAAU,GAE9DvC,EAAOwC,OAAS,WACdvB,QAAQC,IAAI,8BACZlB,EAAOyC,KAAP,oBAAyBL,EAAzB,QAEFpC,EAAO0C,UAAY,SAACC,GAAa,IACvBC,EAASD,EAATC,KACFC,EAAaC,KAAKC,MAAMH,GACtBtC,EAAY,EAAKD,MAAjBC,QACRA,EAAQ0C,KAAKH,GACb,EAAKI,SAAS,CAAC3C,QAASA,IACxBW,QAAQC,IAAI,EAAKb,MAAMC,Y,+BAKzB,OACE,6BACE,4BAAQ4C,IAAI,SAASnB,MAAO7B,EAAW,GAAI8B,OAAQ9B,EAAW,KAC9D,yBAAKgD,IAAI,QAAQC,IAAKC,IAAQrB,MAAM,MAAMC,OAAO,MAAMqB,UAAU,gB,GAzDpDC,IAAMC,W,eCFNC,E,uKAGb,OACI,kBAAC,IAAD,KACI,kBAAC,IAAD,CAAOC,KAAK,YAAYC,UAAWvD,S,GALlBmD,IAAMC,WCDvCI,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,W","file":"static/js/main.399c00d3.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/break.f288d915.png\";","import React from 'react'\nimport { w3cwebsocket as W3CWebSocket } from \"websocket\";\nimport \"./styles.css\";\nimport impact from './break.png';\n\nconst client = new W3CWebSocket('ws://127.0.0.1:8080');\nconst dimensions = [1920, 1080];\nclass Impact extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {impacts: []};\n  }\n\n  componentDidMount() {\n    const canvas = this.refs.canvas;\n    const ctx = canvas.getContext(\"2d\");\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    const TO_RADIANS = Math.PI/180;\n    console.log('update');\n    const canvas = this.refs.canvas;\n    const ctx = canvas.getContext(\"2d\");\n    const img = this.refs.image;\n\n    for (const impactsKey in this.state.impacts){\n      const rotInRad = this.state.impacts[impactsKey].rotation * TO_RADIANS;\n      const posX = this.state.impacts[impactsKey].X;\n      const posY = this.state.impacts[impactsKey].Y + 560 > 1080 ? this.state.impacts[impactsKey].Y - ((1080 - 560) / 2) : this.state.impacts[impactsKey].Y;\n      console.log(`${posX} ${posY}`);\n      const x = (posX);\n      const y = (posY);\n      const width = img.width;\n      const height = img.height;\n\n      ctx.translate(x, y);\n      ctx.rotate(rotInRad);\n      ctx.drawImage(img, -width / 2, -height / 2, width, height);\n      ctx.rotate(-rotInRad);\n      ctx.translate(-x, -y);\n    }\n  }\n\n  componentWillMount() {\n    let pathname = this.props.history.location.pathname.substring(1);\n\n    client.onopen = () => {\n      console.log('WebSocket Client Connected');\n      client.send(`{\"name\": \"${pathname}\"}`);\n    };\n    client.onmessage = (message) => {\n      const { data } = message;\n      const parsedData = JSON.parse(data);\n      const { impacts } = this.state;\n      impacts.push(parsedData);\n      this.setState({impacts: impacts});\n      console.log(this.state.impacts);\n    };\n  }\n\n  render() {\n    return (\n      <div>\n        <canvas ref=\"canvas\" width={dimensions[0]} height={dimensions[1]} />\n        <img ref=\"image\" src={impact} width='800' height='560' className=\"hidden\"/>\n      </div>\n    );\n  }\n}\nexport default Impact;\n","import React from 'react'\nimport \"./styles.css\";\nimport Impact from \"./Impact\";\nimport {BrowserRouter as Router, Route} from \"react-router-dom\";\n\nexport default class App extends React.Component {\n\n    render() {\n        return (\n            <Router>\n                <Route path=\"/:channel\" component={Impact}/>\n            </Router>\n        );\n    }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}